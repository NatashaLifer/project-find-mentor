(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Form;
var _CreateElement = _interopRequireDefault(require("../utils/CreateElement.js"));
var _Api = _interopRequireDefault(require("../utils/Api.js"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function Form(fields, dataset) {
  this.element = document.createElement('form');
  this.element.dataset.bodyelem = dataset;
  this.inputFields = fields;
}
Form.prototype.render = function (nameForm) {
  this.element.className = nameForm;
  if (this.element.className === 'form-signin') {
    this.element.classList.add('active');
  }
  this.inputFields.forEach(field => {
    const input = new _CreateElement.default('input', field);
    const fieldRender = input.render();
    this.element.append(fieldRender);
  });
  this.element.addEventListener("submit", this.onSave.bind(this));
  return this.element;
};
Form.prototype.onSave = async function (event) {
  event.preventDefault();
  const dataFields = this.serialize();
  const apiLogin = new _Api.default('https://dummyjson.com/auth/');
  const postReq = await apiLogin.postRequest('login', dataFields);
  sessionStorage.setItem('tkn', postReq.token);
};
Form.prototype.serialize = function () {
  const fieldsData = {};
  const formData = new FormData(this.element);
  for (let [name] of formData) {
    fieldsData[name] = formData.get(name);
  }
  return fieldsData;
};

},{"../utils/Api.js":5,"../utils/CreateElement.js":6}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
class Modal {
  constructor(html) {
    this.content = html;
  }
  render(btn) {
    const modalWrap = document.querySelector('.modal-wrapper');
    btn.addEventListener("click", () => {
      modalWrap.classList.remove('deactiveted');
      modalWrap.addEventListener('click', event => {
        if (event.currentTarget === event.target || event.target.className === 'modal-close') {
          modalWrap.classList.add('deactiveted');
        }
      });
    });
  }
}
exports.default = Modal;

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _CreateElement = _interopRequireDefault(require("../utils/CreateElement.js"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
class Tabs {
  constructor(selectorHead, selectorBody, tabs) {
    this.tabs = tabs || [];
    this.head = document.querySelector(selectorHead) || '';
    this.bodytab = document.querySelector(selectorBody) || '';
    this.init();
  }
  handleTabs() {
    this.head.addEventListener('click', ev => {
      [...this.head.children].forEach(item => {
        item.classList.remove('active');
      });
      ev.target.classList.add('active');
      ev.target.parentElement.classList.add('active');
      if (this.bodytab) {
        [...this.bodytab.children].forEach(elem => {
          elem.classList.remove('active');
          if (elem.dataset.bodyelem == ev.target.dataset.tab) {
            elem.classList.add('active');
          }
        });
      }
    });
  }
  render() {
    this.tabs.forEach(tab => {
      const singleTab = new _CreateElement.default('button', tab).render();
      if (singleTab.className === 'btn-signin') {
        singleTab.classList.add('active');
      }
      this.head.append(singleTab);
    });
  }
  init() {
    if (!!this.tabs.length) {
      this.render();
    }
    this.handleTabs();
  }
}
exports.default = Tabs;

},{"../utils/CreateElement.js":6}],4:[function(require,module,exports){
"use strict";

var _Tabs = _interopRequireDefault(require("./components/Tabs.js"));
var _Form = _interopRequireDefault(require("./components/Form.js"));
var _Modal = _interopRequireDefault(require("./components/Modal.js"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
// import API from "./utils/Api.js"

// import CreateElement from "./utils/CreateElement.js";

const btnAuth = document.querySelector('.nav__link-auth');
const fieldsData = [{
  type: 'text',
  className: 'field-auth',
  name: 'username',
  placeholder: 'Your name',
  value: 'kminchelle'
}, {
  type: 'password',
  className: 'field-auth',
  name: 'password',
  placeholder: 'Password',
  value: '0lelplR'
}, {
  type: 'submit',
  className: 'btn-auth',
  value: 'Sign in'
}];
const fieldsDataSignUp = [{
  type: 'text',
  className: 'field-auth',
  name: 'username',
  placeholder: 'Your name'
}, {
  type: 'email',
  className: 'field-auth',
  name: 'e-mail',
  placeholder: 'Your e-mail'
}, {
  type: 'password',
  className: 'field-auth',
  name: 'password',
  placeholder: 'Password'
}, {
  type: 'password',
  className: 'field-auth',
  name: 'repeat-password',
  placeholder: 'Repeat your password'
}, {
  type: 'submit',
  className: 'btn-auth',
  value: 'Sign up'
}];
const tabsData = [{
  className: 'btn-signin',
  textContent: 'Sign In',
  dataset: {
    tab: 'signin'
  }
}, {
  className: 'btn-signup',
  textContent: 'Sign Up',
  dataset: {
    tab: 'signup'
  }
}];
const formSignIn = new _Form.default(fieldsData, 'signin');
const formSignUp = new _Form.default(fieldsDataSignUp, 'signup');
const formWrapper = document.querySelector('.tabs-body');
formWrapper.append(formSignIn.render('form-signin'), formSignUp.render('form-signup'));
const tabs = new _Tabs.default('.tabs-head', '.tabs-body', tabsData);
const wrapper = document.querySelector('modal');
const modal = new _Modal.default(wrapper);
modal.render(btnAuth);
const switchMode = document.getElementById('btn');
switchMode.addEventListener('click', () => {
  document.body.classList.toggle('light');
});
const footerTabs = new _Tabs.default('.hero__footer-select');

},{"./components/Form.js":1,"./components/Modal.js":2,"./components/Tabs.js":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
class Api {
  constructor(url) {
    this.ROOT_URL = url;
  }
  async getRequest(routing) {
    const response = await fetch(this.ROOT_URL + routing, {
      method: 'GET'
      // headers: {
      // }
    });

    return await response.json();
  }
  async postRequest(routing) {
    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const response = await fetch(this.ROOT_URL + routing, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: {
        'Content-type': 'application/json'
        // Autorization: `Bearer ${sessionStorage.getItem('token')}`
      }
    });

    return await response.json();
  }
  async putRequest(routing) {
    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const response = await fetch(this.ROOT_URL + routing, {
      method: 'PUT',
      body: JSON.stringify(data),
      headers: {
        'Content-type': 'application/json'
      }
    });
    return await response.json();
  }
  async deleteRequest(routing) {
    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    const response = await fetch(this.ROOT_URL + routing, {
      method: 'DELETE',
      body: JSON.stringify(data),
      headers: {
        'Content-type': 'application/json'
      }
    });
    return await response.json();
  }
}

// export default function Api(baseURL) {
//     this.ROOT_URL = baseURL;

//     this.getRequest = async function (routing) {
//       const response = await fetch(this.ROOT_URL + routing, {
//         method: 'GET',
//         // headers: {
//         // }
//     })
//       return await response.json();
//     }; 

//     this.postRequest = async function(routing, data = {}) {
//       const response = await fetch((this.ROOT_URL + routing), {
//         method: 'POST',
//         body: JSON.stringify(data),
//         headers: {
//           'Content-type': 'application/json',
//           // Autorization: `Bearer ${sessionStorage.getItem('token')}`
//         }
//       })
//       return await response.json()
//     }

//     this.putRequest = async function(routing, data = {}) {
//         const response = await fetch((this.ROOT_URL + routing), {
//           method: 'PUT',
//           body: JSON.stringify(data),
//           headers: {
//             'Content-type': 'application/json',
//           }
//         })
//         return await response.json()
//     }

//     this.deleteRequest = async function(routing, data = {}) {
//         const response = await fetch((this.ROOT_URL + routing), {
//           method: 'DELETE',
//           body: JSON.stringify(data),
//           headers: {
//             'Content-type': 'application/json',
//           }
//         })
//         return await response.json()
//     }   
// }
exports.default = Api;

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
class CreateElement {
  constructor(tagName, params) {
    this.tagName = tagName;
    this.params = params;
  }
  render() {
    const element = document.createElement(this.tagName);
    for (let key in this.params) {
      switch (key) {
        case 'dataset':
          for (let dataKey in this.params[key]) {
            element.dataset[dataKey] = this.params[key][dataKey];
          }
          break;
        default:
          element[key] = this.params[key];
      }
    }
    return element;
  }
}

// export default function CreateElement(tagName, params) {
//     this.tagName = tagName // 'div'
//     this.params = params // {class:'wrapper', dataset:{id:1}}
// }

// CreateElement.prototype.render = function () {
//     const element = document.createElement(this.tagName)
//     for (let key in this.params) {
//         switch (key) {
//             case 'dataset':
//                 for (let dataKey in this.params[key]) {
//                     element.dataset[dataKey] = this.params[key][dataKey]
//                 }
//                 break
//             default:
//                 element[key] = this.params[key]
//         }
//     }
//     return element
// }
exports.default = CreateElement;

},{}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm0uanMiLCJzcmMvc2NyaXB0cy9jb21wb25lbnRzL01vZGFsLmpzIiwic3JjL3NjcmlwdHMvY29tcG9uZW50cy9UYWJzLmpzIiwic3JjL3NjcmlwdHMvbWFpbi5qcyIsInNyYy9zY3JpcHRzL3V0aWxzL0FwaS5qcyIsInNyYy9zY3JpcHRzL3V0aWxzL0NyZWF0ZUVsZW1lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFBLGNBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUE7QUFDQSxJQUFBLElBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUE7QUFBaUMsU0FBQSx1QkFBQSxHQUFBLFdBQUEsR0FBQSxJQUFBLEdBQUEsQ0FBQSxVQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsRUFBQSxHQUFBO0FBRWxCLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7RUFDNUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztFQUM3QyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsT0FBTztFQUN2QyxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU07QUFDM0I7QUFFQSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxVQUFVLFFBQVEsRUFBRTtFQUMxQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxRQUFRO0VBQ2pDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEtBQUssYUFBYSxFQUFFO0lBQzVDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7RUFDdEM7RUFFQSxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBRSxLQUFLLElBQUs7SUFDbEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxz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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBLE9BQUEsQ0FBQSxPQUFBLEdBQUEsR0FBQTs7Ozs7Ozs7O0FDMUZlLE1BQU0sYUFBYSxDQUFDO0VBQy9CLFdBQVcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFO0lBQ3pCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTztJQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU07RUFDeEI7RUFDQSxNQUFNLENBQUEsRUFBRztJQUNMLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUNwRCxLQUFLLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7TUFDekIsUUFBUSxHQUFHO1FBQ1AsS0FBSyxTQUFTO1VBQ1YsS0FBSyxJQUFJLE9BQU8sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ2xDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7VUFDeEQ7VUFDQTtRQUNKO1VBQ0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BQ3ZDO0lBQ0o7SUFDQSxPQUFPLE9BQU87RUFDbEI7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQSxPQUFBLENBQUEsT0FBQSxHQUFBLGFBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgQ3JlYXRlRWxlbWVudCBmcm9tIFwiLi4vdXRpbHMvQ3JlYXRlRWxlbWVudC5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRm9ybShmaWVsZHMsIGRhdGFzZXQpIHtcclxuICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcclxuICB0aGlzLmVsZW1lbnQuZGF0YXNldC5ib2R5ZWxlbSA9IGRhdGFzZXRcclxuICB0aGlzLmlucHV0RmllbGRzID0gZmllbGRzO1xyXG59XHJcblxyXG5Gb3JtLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobmFtZUZvcm0pIHtcclxuICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gbmFtZUZvcm1cclxuICBpZiAodGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9PT0gJ2Zvcm0tc2lnbmluJykge1xyXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgfVxyXG5cclxuICB0aGlzLmlucHV0RmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICBjb25zdCBpbnB1dCA9IG5ldyBDcmVhdGVFbGVtZW50KCdpbnB1dCcsIGZpZWxkKVxyXG4gICAgY29uc3QgZmllbGRSZW5kZXIgPSBpbnB1dC5yZW5kZXIoKVxyXG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZChmaWVsZFJlbmRlcik7XHJcbiAgfSk7XHJcbiAgXHJcblxyXG4gIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMub25TYXZlLmJpbmQodGhpcykpO1xyXG4gIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbn07XHJcbiAgICBcclxuRm9ybS5wcm90b3R5cGUub25TYXZlID0gYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbmV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuY29uc3QgZGF0YUZpZWxkcyA9IHRoaXMuc2VyaWFsaXplKCk7XHJcblxyXG5jb25zdCBhcGlMb2dpbiA9IG5ldyBBcGkoJ2h0dHBzOi8vZHVtbXlqc29uLmNvbS9hdXRoLycpXHJcbmNvbnN0IHBvc3RSZXEgPSBhd2FpdCBhcGlMb2dpbi5wb3N0UmVxdWVzdCgnbG9naW4nLCBkYXRhRmllbGRzKVxyXG5cclxuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndGtuJywgcG9zdFJlcS50b2tlbilcclxufVxyXG5cclxuRm9ybS5wcm90b3R5cGUuc2VyaWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IGZpZWxkc0RhdGEgPSB7fTtcclxuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0aGlzLmVsZW1lbnQpXHJcbiAgXHJcbiAgZm9yKGxldCBbbmFtZV0gb2YgZm9ybURhdGEpe1xyXG4gICAgZmllbGRzRGF0YVtuYW1lXSA9IGZvcm1EYXRhLmdldChuYW1lKVxyXG4gIH1cclxuICByZXR1cm4gZmllbGRzRGF0YTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3RvciAoaHRtbCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGh0bWxcclxuICAgIH1cclxuICAgIHJlbmRlcihidG4pIHtcclxuICAgICAgICBjb25zdCBtb2RhbFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtd3JhcHBlcicpXHJcblxyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2RhbFdyYXAuY2xhc3NMaXN0LnJlbW92ZSgnZGVhY3RpdmV0ZWQnKVxyXG5cclxuICAgICAgICAgICAgbW9kYWxXcmFwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7ICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCA9PT0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPT09ICdtb2RhbC1jbG9zZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbFdyYXAuY2xhc3NMaXN0LmFkZCgnZGVhY3RpdmV0ZWQnKVxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfSkgICAgXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImltcG9ydCBDcmVhdGVFbGVtZW50IGZyb20gXCIuLi91dGlscy9DcmVhdGVFbGVtZW50LmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJzIHtcclxuICAgIGNvbnN0cnVjdG9yIChzZWxlY3RvckhlYWQsIHNlbGVjdG9yQm9keSwgdGFicykge1xyXG4gICAgICAgIHRoaXMudGFicyA9IHRhYnMgfHwgW11cclxuICAgICAgICB0aGlzLmhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ySGVhZCkgfHwgJycgXHJcbiAgICAgICAgdGhpcy5ib2R5dGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvckJvZHkpIHx8ICcnIFxyXG4gICAgICAgIHRoaXMuaW5pdCgpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGhhbmRsZVRhYnMoKSB7XHJcbiAgICBcclxuICAgICAgICB0aGlzLmhlYWQuYWRkRXZlbnRMaXN0ZW5lciAoJ2NsaWNrJywgKGV2KSA9PiB7XHJcbiAgICAgICAgICAgIFsuLi50aGlzLmhlYWQuY2hpbGRyZW5dLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGV2LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgZXYudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMuYm9keXRhYikge1xyXG4gICAgICAgICAgICAgICAgWy4uLnRoaXMuYm9keXRhYi5jaGlsZHJlbl0uZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5kYXRhc2V0LmJvZHllbGVtID09IGV2LnRhcmdldC5kYXRhc2V0LnRhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaCgodGFiKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpbmdsZVRhYiA9IG5ldyBDcmVhdGVFbGVtZW50KCdidXR0b24nLCB0YWIpLnJlbmRlcigpICBcclxuICAgICAgICAgICAgaWYgKHNpbmdsZVRhYi5jbGFzc05hbWUgPT09ICdidG4tc2lnbmluJykge1xyXG4gICAgICAgICAgICAgICAgc2luZ2xlVGFiLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIHRoaXMuaGVhZC5hcHBlbmQoc2luZ2xlVGFiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBpZighIXRoaXMudGFicy5sZW5ndGgpe1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlVGFicygpXHJcblxyXG4gICAgfVxyXG59XHJcbiIsIi8vIGltcG9ydCBBUEkgZnJvbSBcIi4vdXRpbHMvQXBpLmpzXCJcclxuaW1wb3J0IFRhYnMgZnJvbSBcIi4vY29tcG9uZW50cy9UYWJzLmpzXCJcclxuaW1wb3J0IEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtLmpzXCJcclxuaW1wb3J0IE1vZGFsIGZyb20gXCIuL2NvbXBvbmVudHMvTW9kYWwuanNcIlxyXG4vLyBpbXBvcnQgQ3JlYXRlRWxlbWVudCBmcm9tIFwiLi91dGlscy9DcmVhdGVFbGVtZW50LmpzXCI7XHJcblxyXG5jb25zdCBidG5BdXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdl9fbGluay1hdXRoJylcclxuXHJcbmNvbnN0IGZpZWxkc0RhdGEgPSBbXHJcbiAgICB7dHlwZTogJ3RleHQnLCBjbGFzc05hbWU6ICdmaWVsZC1hdXRoJywgbmFtZTogJ3VzZXJuYW1lJywgcGxhY2Vob2xkZXI6ICdZb3VyIG5hbWUnLCB2YWx1ZTogJ2ttaW5jaGVsbGUnfSxcclxuICAgIHt0eXBlOiAncGFzc3dvcmQnLCBjbGFzc05hbWU6ICdmaWVsZC1hdXRoJywgbmFtZTogJ3Bhc3N3b3JkJywgcGxhY2Vob2xkZXI6ICdQYXNzd29yZCcsIHZhbHVlOiAnMGxlbHBsUid9LFxyXG4gICAge3R5cGU6ICdzdWJtaXQnLCBjbGFzc05hbWU6ICdidG4tYXV0aCcsIHZhbHVlOiAnU2lnbiBpbid9XHJcbl1cclxuXHJcbmNvbnN0IGZpZWxkc0RhdGFTaWduVXAgPSBbXHJcbiAgICB7dHlwZTogJ3RleHQnLCBjbGFzc05hbWU6ICdmaWVsZC1hdXRoJywgbmFtZTogJ3VzZXJuYW1lJywgcGxhY2Vob2xkZXI6ICdZb3VyIG5hbWUnfSxcclxuICAgIHt0eXBlOiAnZW1haWwnLCBjbGFzc05hbWU6ICdmaWVsZC1hdXRoJywgbmFtZTogJ2UtbWFpbCcsIHBsYWNlaG9sZGVyOiAnWW91ciBlLW1haWwnfSxcclxuICAgIHt0eXBlOiAncGFzc3dvcmQnLCBjbGFzc05hbWU6ICdmaWVsZC1hdXRoJywgbmFtZTogJ3Bhc3N3b3JkJywgcGxhY2Vob2xkZXI6ICdQYXNzd29yZCd9LFxyXG4gICAge3R5cGU6ICdwYXNzd29yZCcsIGNsYXNzTmFtZTogJ2ZpZWxkLWF1dGgnLCBuYW1lOiAncmVwZWF0LXBhc3N3b3JkJywgcGxhY2Vob2xkZXI6ICdSZXBlYXQgeW91ciBwYXNzd29yZCd9LFxyXG4gICAge3R5cGU6ICdzdWJtaXQnLCBjbGFzc05hbWU6ICdidG4tYXV0aCcsIHZhbHVlOiAnU2lnbiB1cCd9XHJcbl1cclxuXHJcbmNvbnN0IHRhYnNEYXRhID0gW1xyXG4gICAge2NsYXNzTmFtZTogJ2J0bi1zaWduaW4nLCB0ZXh0Q29udGVudDogJ1NpZ24gSW4nLCBkYXRhc2V0OiB7dGFiOidzaWduaW4nfX0sXHJcbiAgICB7Y2xhc3NOYW1lOiAnYnRuLXNpZ251cCcsIHRleHRDb250ZW50OiAnU2lnbiBVcCcsIGRhdGFzZXQ6IHt0YWI6J3NpZ251cCd9fVxyXG5dXHJcblxyXG5jb25zdCBmb3JtU2lnbkluID0gbmV3IEZvcm0oZmllbGRzRGF0YSwgJ3NpZ25pbicpXHJcbmNvbnN0IGZvcm1TaWduVXAgPSBuZXcgRm9ybShmaWVsZHNEYXRhU2lnblVwLCAnc2lnbnVwJylcclxuY29uc3QgZm9ybVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFicy1ib2R5JylcclxuZm9ybVdyYXBwZXIuYXBwZW5kKGZvcm1TaWduSW4ucmVuZGVyKCdmb3JtLXNpZ25pbicpLGZvcm1TaWduVXAucmVuZGVyKCdmb3JtLXNpZ251cCcpKVxyXG5cclxuY29uc3QgdGFicyA9IG5ldyBUYWJzKCcudGFicy1oZWFkJywgJy50YWJzLWJvZHknLCB0YWJzRGF0YSlcclxuXHJcblxyXG5jb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbW9kYWwnKVxyXG5cclxuY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwod3JhcHBlcilcclxubW9kYWwucmVuZGVyKGJ0bkF1dGgpXHJcblxyXG5cclxuY29uc3Qgc3dpdGNoTW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4nKVxyXG5cclxuc3dpdGNoTW9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbGlnaHQnKSBcclxufSlcclxuXHJcbmNvbnN0IGZvb3RlclRhYnMgPSBuZXcgVGFicygnLmhlcm9fX2Zvb3Rlci1zZWxlY3QnKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1cmwpIHtcclxuICAgICAgICB0aGlzLlJPT1RfVVJMID0gdXJsXHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRSZXF1ZXN0KHJvdXRpbmcpIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuUk9PVF9VUkwgKyByb3V0aW5nLCB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgLy8gaGVhZGVyczoge1xyXG4gICAgICAgICAgLy8gfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHBvc3RSZXF1ZXN0KHJvdXRpbmcsIGRhdGEgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goKHRoaXMuUk9PVF9VUkwgKyByb3V0aW5nKSwge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgLy8gQXV0b3JpemF0aW9uOiBgQmVhcmVyICR7c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKX1gXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICB9XHJcbiAgICBhc3luYyBwdXRSZXF1ZXN0KHJvdXRpbmcsIGRhdGEgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goKHRoaXMuUk9PVF9VUkwgKyByb3V0aW5nKSwge1xyXG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgfVxyXG4gICAgYXN5bmMgZGVsZXRlUmVxdWVzdChyb3V0aW5nLCBkYXRhID0ge30pIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCh0aGlzLlJPT1RfVVJMICsgcm91dGluZyksIHtcclxuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgIH0gICBcclxufVxyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBpKGJhc2VVUkwpIHtcclxuLy8gICAgIHRoaXMuUk9PVF9VUkwgPSBiYXNlVVJMO1xyXG4gIFxyXG4vLyAgICAgdGhpcy5nZXRSZXF1ZXN0ID0gYXN5bmMgZnVuY3Rpb24gKHJvdXRpbmcpIHtcclxuLy8gICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLlJPT1RfVVJMICsgcm91dGluZywge1xyXG4vLyAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbi8vICAgICAgICAgLy8gaGVhZGVyczoge1xyXG4vLyAgICAgICAgIC8vIH1cclxuLy8gICAgIH0pXHJcbi8vICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbi8vICAgICB9OyBcclxuICBcclxuLy8gICAgIHRoaXMucG9zdFJlcXVlc3QgPSBhc3luYyBmdW5jdGlvbihyb3V0aW5nLCBkYXRhID0ge30pIHtcclxuLy8gICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgodGhpcy5ST09UX1VSTCArIHJvdXRpbmcpLCB7XHJcbi8vICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbi8vICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbi8vICAgICAgICAgaGVhZGVyczoge1xyXG4vLyAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuLy8gICAgICAgICAgIC8vIEF1dG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyl9YFxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgfSlcclxuLy8gICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIHRoaXMucHV0UmVxdWVzdCA9IGFzeW5jIGZ1bmN0aW9uKHJvdXRpbmcsIGRhdGEgPSB7fSkge1xyXG4vLyAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goKHRoaXMuUk9PVF9VUkwgKyByb3V0aW5nKSwge1xyXG4vLyAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuLy8gICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4vLyAgICAgICAgICAgaGVhZGVyczoge1xyXG4vLyAgICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4vLyAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH0pXHJcbi8vICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4vLyAgICAgfVxyXG4gICAgXHJcbi8vICAgICB0aGlzLmRlbGV0ZVJlcXVlc3QgPSBhc3luYyBmdW5jdGlvbihyb3V0aW5nLCBkYXRhID0ge30pIHtcclxuLy8gICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCh0aGlzLlJPT1RfVVJMICsgcm91dGluZyksIHtcclxuLy8gICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbi8vICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuLy8gICAgICAgICAgIGhlYWRlcnM6IHtcclxuLy8gICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuLy8gICAgICAgICAgIH1cclxuLy8gICAgICAgICB9KVxyXG4vLyAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKClcclxuLy8gICAgIH0gICBcclxuLy8gfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWF0ZUVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IodGFnTmFtZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy50YWdOYW1lID0gdGFnTmFtZVxyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zXHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWdOYW1lKVxyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLnBhcmFtcykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0YXNldCc6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZGF0YUtleSBpbiB0aGlzLnBhcmFtc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldFtkYXRhS2V5XSA9IHRoaXMucGFyYW1zW2tleV1bZGF0YUtleV1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFtrZXldID0gdGhpcy5wYXJhbXNba2V5XVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVtZW50XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIGV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZUVsZW1lbnQodGFnTmFtZSwgcGFyYW1zKSB7XHJcbi8vICAgICB0aGlzLnRhZ05hbWUgPSB0YWdOYW1lIC8vICdkaXYnXHJcbi8vICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcyAvLyB7Y2xhc3M6J3dyYXBwZXInLCBkYXRhc2V0OntpZDoxfX1cclxuLy8gfVxyXG5cclxuLy8gQ3JlYXRlRWxlbWVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWdOYW1lKVxyXG4vLyAgICAgZm9yIChsZXQga2V5IGluIHRoaXMucGFyYW1zKSB7XHJcbi8vICAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuLy8gICAgICAgICAgICAgY2FzZSAnZGF0YXNldCc6XHJcbi8vICAgICAgICAgICAgICAgICBmb3IgKGxldCBkYXRhS2V5IGluIHRoaXMucGFyYW1zW2tleV0pIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXRbZGF0YUtleV0gPSB0aGlzLnBhcmFtc1trZXldW2RhdGFLZXldXHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICBicmVha1xyXG4vLyAgICAgICAgICAgICBkZWZhdWx0OlxyXG4vLyAgICAgICAgICAgICAgICAgZWxlbWVudFtrZXldID0gdGhpcy5wYXJhbXNba2V5XVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIHJldHVybiBlbGVtZW50XHJcbi8vIH0iXX0=
